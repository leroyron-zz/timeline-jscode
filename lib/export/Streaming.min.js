var Streaming=function(a){Streaming=function(a){this.open=this.open||function(){this.build=function(a){try{this.stream=this.bindings.stream,this.nodesPerStream=this.bindings.nodesPerStream,this.propsPerNode=this.bindings.propsPerNode,this.propsPerNodeList=this.bindings.propsPerNodeList,this.propDataLength=this.bindings.propDataLength,this.continuancePosValData0=1,this.data0PropDataLength=this.continuancePosValData0+this.propDataLength,this.nodeDataLength=this.data0PropDataLength*this.propsPerNode+
this.propsPerNode+1,this.data=this._prebuff(this.bindings.data),this.bindings.stream=this.bindings.nodesPerStream=this.bindings.propsPerNode=this.bindings.propsPerNodeList=this.bindings.propDataLength=this.bindings.data=null,delete this.bindings.stream,delete this.bindings.nodesPerStream,delete this.bindings.propsPerNode,delete this.bindings.propsPerNodeList,delete this.bindings.propDataLength,delete this.bindings.state,delete this.bindings.data,this._finalize(a)}catch(e){console.log("Streaming: No bindings - ref: http://")}finally{console.log("Streaming - "),
console.log("Like what you see? Are you a dev? We need people like you! https://github.com/leroyron/timeline-jscode")}};this.access=this.access||function(a,b,d,f,l,g,p,m){var c=a,e=b,O=d,D=f,n=l,r=g,h=p,q=m;this.defaults={};this.nextRuntimeCallback=this.mCount=this.tCount=this.rCount=0;this.runtimeCalls=[];this.ruclen=0;this.runtimeCallbacks=function(a){for(var b=E,c,g=0;g<this.ruclen;g++)(c=this.runtimeCalls[g][1](this.runtimeCalls[g][0]||this.nextRuntimeCallback,a,0))&&c<b&&(b=c);this.nextRuntimeCallback=
b;this.block&&(this.rCount=this.tCount=this.block=0);this.runtimeCallbacks=t};var t=function(a){if(!(a+this.data[2]<=this.nextRuntimeCallback||a+this.data[2]>E)){for(var b=E,c,g=0;g<this.ruclen;g++)(c=this.runtimeCalls[g][1](this.runtimeCalls[g][0]||this.nextRuntimeCallback,a,this.data[2]))&&c<b&&(b=c);this.nextRuntimeCallback=b;this.block&&(this.rCount=this.tCount=this.block=0)}};this.revertCalls=[];this.rrclen=0;this.revertCallbacks=function(a,b){for(var c=E,g,h=0;h<this.rrclen;h++)(g=this.revertCalls[h][1](this.revertCalls[h][0]||
a,b))&&g<c&&(c=g);this.nextRuntimeCallback=c;this.syncOffsets(a)};this.update=function(a,b,g,d,f,m,k,p){c=a;e=b;O=g;D=d;n=f;r=m;h=k;q=p;this.updateCallbacks()};this.updateCalls=[];this.upclen=0;this.updateCallbacks=function(){for(var a=0;a<this.upclen;a++)this.updateCalls[a][1](this.updateCalls[a][0])};var v="stream",y,B,F,E,J,G,N,P;this._finalize=function(a){v=this.stream;y=this.nodesPerStream;B=this.propsPerNode;F=this._prebuff(this.propsPerNodeList);E=this.propDataLength;J=this.continuancePosValData0;
G=this.data0PropDataLength;N=this.nodeDataLength;this.nodesPerStream=this.propsPerNode=this.data0PropDataLength=delete this.nodesPerStream;delete this.propsPerNode;delete this.propsPerNodeList;delete this.data0PropDataLength;P=this.data.length;this.updateCallbacks();a()};this.revertFromTo=function(a,b){this.propDataLength=E=a;this.continuancePosValData0=J=b+1};this.reversion=function(a){return a-E*(a/E<<0)+J};this.method=this.option="Change the streaming process";this.process=function(a,b,g){switch(this.option){case "thrust":this.tCount=
a+D;this.runtimeCallbacks(this.tCount);switch(this.method){case "all":this._thrustAll(this.tCount);break;case "nodes":this._thrustNodes(this.tCount,g);break;case "properties":this._thrustProperties(this.tCount,g);break;case "mix":this._thrustMix(this.tCount,g);break;default:this._thrustAll(this.tCount)}break;case "read":this.rCount=a+O;this.runtimeCallbacks(this.rCount);switch(this.method){case "all":this._readAll(this.rCount);break;case "nodes":this._readNodes(this.rCount,g);break;case "properties":this._readProperties(this.rCount,
g);break;case "mix":this._readMix(this.rCount,g);break;default:this._readAll(this.rCount)}break;case "measure":switch(this.mCount=a+r,this.runtimeCallbacks(this.mCount),this.method){case "all":return[this._measureAll(this.mCount)];case "nodes":return[this._measureNodes(this.mCount,g)];case "properties":return[this._measureProperties(this.mCount,g)];case "mix":return[this._measureMix(this.mCount,g)];default:return[this._measureAll(this.mCount)]}}};this.output_utilizeMeasureData=this.output_utilizeThrustData=
this.output_utilizeReadData="Data entry portal for execute, ref this to outer functions";var k=0,A=0,x=0,w=0,K=0,H=0,z,u,I,T=-1,C=0,M=0;this._currentDataPos=function(){return this.data[2]};this._checkInContinuance=function(){if(!c)return k;k+=this.data[u];this._updateDataPos();return k};this._updateDataPos=function(a){a=a||k;z=a-x-H;u=a-z};this._checkOutRevert=function(a){if(!n)return k;this.data[u]=z=this.reversion(z+(a||e));T!=z&&(T=z,this.output_revertCall(J),this.revertCallbacks(J,z),setTimeout(function(){T=
-1},1E3));return z};this.output_revertCall="Data entry portal for execute, ref this to outer functions";this._callOutLeap=function(a){var b=this.bindings.ids["_bi"+C],g=b[M],c=b.node[v][g.binding].leap;c&&(this.data[a]=c.zeroIn||0,c.callback(),c.dispose&&(b.node[v][g.binding].leap=null,delete b.node[v][g.binding].leap))};this._readAll=function(a){for(w=x=K=A=k=0;k<P;k++)if(0==(k-A)%N&&(C=this.data[k],F[C]&&(k-A!=A&&(A=k,K=k%G,w=0),B=F[C],N=G*B+B+1),k++,x=1,w++),(k-w)%G==K&&(H=k-x,M=this.data[k],k++,
x++,w++,z=k-x-H,u=k-z,I=u+(G-z-1),q&&(this.data[u]=J),k=this._checkInContinuance()),-1==C)k=I,this._updateDataPos();else if(0<a)this.output_utilizeReadData(this._dataVal(a),C,M);else break};this._dataVal=function(a){var b=this.data[k],g=z+a,e=u+g;g>E&&n&&(g=this._checkOutRevert(a),k=e=u+g);this.data[e]==h?(c&&(this.data[u]=g),this.data[e]=0):(k=e,this._updateDataPos(),this.data[u]=z,b=this.data[k]);k=I;this._updateDataPos();return b};this._thrustAll=function(a){for(w=x=k=0;k<P;k++)if(0==k%N&&(C=this.data[k],
k++,x=1,w++),0==(k-w)%G&&(H=k-x,M=this.data[k],k++,x++,w++,z=k-x-H,u=k-z,I=u+(G-z-1),q&&(this.data[u]=J),k=this._checkInContinuance()),-1==C)k=I,this._updateDataPos();else if(0<a)this.output_utilizeThrustData(this._dataSum(a),C,M);else break};this._dataSum=function(a){for(var b=0,g=0;g<a;g++){var e=z+1,d=u+e;if(e>E)if(n)g--,e=this._checkOutRevert(1),k=u+e;else break;else if(this.data[d]==h){c&&(this.data[u]=e);this._callOutLeap(d);break}else k=d,this._updateDataPos(),this.data[u]=z,b+=this.data[k]}k=
I;this._updateDataPos();return b};var S=0,L;this._measureAll=function(a){L=new Int32Array(new ArrayBuffer(a*B+B+4*y));for(w=x=k=S=0;k<P;k++)if(0==k%N&&(C=this.data[k],L[S++]=C,k++,x=1,w++),0==(k-w)%G&&(H=k-x,M=this.data[k],L[S++]=M,k++,x++,w++,z=k-x-H,u=k-z,I=u+(G-z-1),q&&(this.data[u]=J),k=this._checkInContinuance()),-1==C)k=I,this._updateDataPos();else if(0<a)this.output_utilizeMeasureData(this._dataReturn(a,L),C,M);else return;return L};this._dataReturn=function(a,b){for(var g=0;g<a;g++){var c=
z+1,e=u+c;if(c>E)if(n)g--,k=u+J,this._updateDataPos();else break;else if(this.data[e]==h){k=I;this._updateDataPos();break}else k=e,this._updateDataPos(),b[S++]=this.data[k]}k=I;this._updateDataPos();return b};this.syncOffsets=function(a){a++;for(w=x=K=A=k=0;k<P;k++)0==(k-A)%N&&(F[this.data[k]]&&(k-A!=A&&(A=k,K=k%G,w=0),B=F[this.data[k]],N=G*B+B+1),k++,x=1,w++),(k-w)%G==K&&(H=k-x,k++,x++,w++,z=k-x-H,u=k-z,I=u+(G-z-1),q&&(this.data[u]=J),k=this._checkInContinuance(),a>E&&(a=this._checkOutRevert(a))),
this.data[u]=a,k=I,this._updateDataPos()};this.arguments={continuance:c,skip:e,rCount:O,tCount:D,revert:n,mCount:r,leap:h,reset:q,_accessed:!0};return this};this._prebuff=function(a){for(var b=a.length,c=new Int32Array(new ArrayBuffer(4*b)),f=0;f<b;f++)c[f]=a[f];return c};this.access.prototype.length=this.length};this.constructor.prototype.length=this.constructor.prototype.length||a;this.open.prototype.length=this.constructor.prototype.length;return this.open()};a(Streaming);return Streaming}(function(a){var b=
a.prototype;b.addon={};b.open=function(){var g=this.open.prototype;g.addon=this.addon;b.open=void 0;var c=new a;c._access=c.access;c._access.prototype.addon=g.addon;c.access=function(){this.access=this._access;var a=this.access.apply(this,arguments),b;for(b in this.addon)for(var g in this.addon[b])if("access"==g)this.addon[b][g]=a;else for(var c in this.addon[b][g])"accessRuntime"==c&&(a.runtimeCalls.push([0,this.addon[b][g].runtime]),a.ruclen++),"accessRevert"==c&&(a.revertCalls.push([0,this.addon[b][g].revert]),
a.rrclen++),"accessUpdate"==c&&(a.updateCalls.push([0,this.addon[b][g].update]),a.upclen++);return a};return c};var c=b.addon.runtime={access:void 0,system:function(){var a=this.constructor,b,c,e,d,f,D,n,r,h,q,t,v;this.update=function(){return this};this.proxy=function(){return this};this.init=function(){return this};this.Pointer=function(){b=a.pointer;this.Pointer=new b;return this};this.Knob=function(){c=a.knob;this.Knob=new c;return this};this.Subject=function(){e=a.subject;this.Subject=new e;
return this};this.Marquee=function(){if(b||c||e)return d=a.marquee,this.Marquee=new d,this;console.log("System Marquee: No - Pointer, Knob or Subject detected")};this.Grid=function(){if(b||c||e)return f=a.grid,this.Grid=new f,this;console.log("System Grid: No - Pointer, Knob or Subject detected")};this.Parallax=function(){if(f)return D=this.Grid.parallax,this.Parallax=new D,this;console.log("System Parallax: No - Grid system detected")};this.Entity=function(){if(D)return n=this.Parallax.entity,this.Entity=
new n,this;console.log("System Entity: No - Parallax system detected")};this.Physic=function(){if(D)return r=this.Parallax.physic,this.Physic=new r,this;console.log("System Physic: No - Parallax system detected")};this.Bound=function(){if(D)return h=this.Parallax.bound,this.Bound=new h,this;console.log("System Bound: No - Parallax system detected")};this.Collision=function(){if(D)return q=this.Parallax.collision,this.Collision=new q,this;console.log("System Collision: No - Parallax system detected")};
this.Particle=function(){if(n||r||h||q)return t=this.Parallax.particle,this.Particle=new t,this;console.log("System Particle: No - Entity, Physic, Bound or Collision detected")};this.Rig=function(){if(n||r||h||q)return v=this.Parallax.rig,this.Rig=new v,this;console.log("System Rig: No - Entity, Physic, Bound or Collision detected")};return this instanceof a?this.That:new a}};b.addon.runtime.system.pointer=function(){var a=this.constructor,b={},c={},e={};this.bind=function(a,g){b=a;c=g;return this};
this.result=function(a){e=a;return this};this.init=function(){c.onmousedown=c.ontouchstart=function(a){a.preventDefault();if(b.enabled)if(a.changedTouches)for(var c=0,g=a.changedTouches.length;c<g;c++)d(!0,b,a.changedTouches[c].identifier,a,this,function(a){e(a)});else d(!1,b,0,a,this,function(a){e(a)})};c.onmousemove=c.ontouchmove=function(a){a.preventDefault();if(b.inUse)if(a.changedTouches)for(var c=0,g=a.changedTouches.length;c<g;c++)d(!0,b,a.changedTouches[c].identifier,a,this,function(a){e(a)},
!0);else d(!1,b,0,a,this,function(a){e(a)},!0);else a.changedTouches||d(!1,b,0,a,this,function(a){e(a)},!0)};c.onmouseup=c.ontouchend=function(a){a.preventDefault();if(b.enabled)if(a.changedTouches)for(var c=0,g=a.changedTouches.length;c<g;c++){if(!f(a.targetTouches,a.changedTouches[c].identifier)){var h=a.changedTouches[c].identifier;d(!0,b,h,a,this,function(a){e(a)});delete b[h]}}else d(!1,b,0,a,this,function(a){e(a)}),b.inUse=!1,delete b[0]};return this};var d=function(a,c,g,e,d,f,m){c[g]=e;c[g].normal=
{};c[g].viewport={};if(a)if(e.targetTouches[g])var h=e.targetTouches[g];else if(console.log("touch missed"),e.changedTouches[g])h=e.changedTouches[g];else{console.log("exiting");return}else h=e;c[g].normal.x=(h.pageX-d.offsetLeft)/d.clientWidth;c[g].normal.y=(h.pageY-d.offsetTop)/d.clientHeight;c[g].viewport.x=2*c[g].normal.x-1;c[g].viewport.y=2*-c[g].normal.y+1;f(c[g]);if(!m){if("mousedown"==e.type||"touchstart"==e.type)b.inUse=!0;if("mouseup"==e.type||"touchend"==e.type)b.inUse=!1;a&&(b.multi=!1,
0==h.length?b.inUse=!1:1<h.length&&(b.multi=!0));c[g].area=0<h.pageX?"right":"left"}},f=function(a,b){for(var c=0,g=a.length;c<g;c++)if(a[c].identifier===b)return!0;return!1};return this instanceof a?this.That:new a};b.addon.runtime.system.knob=function(){var a=this.constructor;this.bind=function(){return this};this.result=function(a){return this};this.init=function(){return this};return this instanceof a?this.That:new a};b.addon.runtime.system.subject=function(){var a=this.constructor;this.bind=
function(){return this};this.result=function(a){return this};this.init=function(){return this};return this instanceof a?this.That:new a};b.addon.runtime.system.marquee=function(){var a=this.constructor;this.bind=function(){return this};this.result=function(a){return this};this.init=function(){return this};return this instanceof a?this.That:new a};b.addon.runtime.system.grid=function(){var a=this.constructor;this.layers={};var b=[],c=[],e=0,d={};this.update=function(){return this};this.mode=function(a){return this};
this.dir=function(a){this.dir=a;return this};this.batches=function(){b=arguments;return this};this.offsets=function(){c=arguments;return this};this.properties=function(a){e=a.count;this.name=a.name;this.columns=a.columns;this.rows=a.rows;d.width=a.width;d.height=a.height;return this};this.syntax=function(a){this.syntax=a;return this};this.assign=function(a){this.assign=a;return this};this.init=function(){for(var a=0;a<b.length;a++){this.batch={name:b[a],index:a};this.layers[this.batch.name]={offset:c[a],
update:this.update,grid:[]};for(var g=0;g<e;g++){var f=g/this.columns<<0,h=g-f*this.columns;this.layers[this.batch.name].grid[h]||(this.layers[this.batch.name].grid[h]=[]);this.layers[this.batch.name].grid[h][f]={};this.layers[this.batch.name].grid[h][f]=this.assign(this.syntax(g),g,this.batch,h,f,d,this.layers[this.batch.name].grid[h][f])}}return this.layers};for(var f in a)this[f]=a[f];return this instanceof a?this.That:new a};b.addon.runtime.system.grid.parallax=function(){var a=this.constructor;
this.update=function(){return this};this.field=function(a){return this};this.separation=function(){return this};this.update=function(){return this};this.func=function(){return this};this.move=function(){return this};this.init=function(){return this};for(var b in a)this[b]=a[b];return this instanceof a?this.That:new a};b.addon.runtime.system.grid.parallax.entity=function(){var a=this.constructor;this.bind=function(){return this};this.result=function(a){return this};this.init=function(){return this};
return this instanceof a?this.That:new a};b.addon.runtime.system.grid.parallax.physic=function(){var a=this.constructor;this.bind=function(){return this};this.result=function(a){return this};this.init=function(){return this};return this instanceof a?this.That:new a};b.addon.runtime.system.grid.parallax.bound=function(){var a=this.constructor;this.bind=function(){return this};this.result=function(a){return this};this.init=function(){return this};return this instanceof a?this.That:new a};b.addon.runtime.system.grid.parallax.collision=
function(){var a=this.constructor;this.bind=function(){return this};this.result=function(a){return this};this.init=function(){return this};return this instanceof a?this.That:new a};b.addon.runtime.system.grid.parallax.particle=function(){var a=this.constructor;this.bind=function(){return this};this.result=function(a){return this};this.init=function(){return this};return this instanceof a?this.That:new a};b.addon.runtime.system.grid.parallax.rig=function(){var a=this.constructor;this.bind=function(){return this};
this.result=function(a){return this};this.init=function(){return this};return this instanceof a?this.That:new a};b.addon.binding=function(){var a=b.addon.binding={};a.init=function(g,e,d,f,l,D){c.access.defaults.relative=c.access.defaults.relative||!1;c.access.bindings=c[g]=c[g]||{stream:g,data:[],nodesPerStream:0,propsPerNode:f?f.length:d?d.length:0,propDataLength:b.length,propsPerNodeList:[],state:"prebuff",continuancePosValData0:1,reversion:function(a){return a-this.propDataLength*(a/this.propDataLength<<
0)+this.continuancePosValData0}};var m=c.access.bindings.propsPerNodeList,r=m.length-1;c[g].nodesPerStream+=e.length;var h=c[g];h.length=h.length||b.length;h.ids=h.ids||{};var q=b.length;e[0][0].type=e[0][0].type?"position"==e[0][0].type||"rotation"==e[0][0].type||"f"==e[0][0].type||"Vector3"==e[0][0].constructor.name||"Euler"==e[0][0].constructor.name?e[0][0].type:d[0][0]:d[0][0];var t=e[0][0].type=Math.Type.identify(e[0][0]);a.buffIdKey=a.buffIdKey||800;a.propIdKey="radian"==t?806:801;var v=D||
Math.Type.precision(t),y=l||c.access.defaults.relative,B=[];for(l={};0<e.length;)l.buffKey=e[0][1]||a.buffIdKey,l.props="poly"==t?Math.Poly.generate(t,d[0][1],v):Math.Type.convertToPrecisionDataType(t,d.concat(),1,2,v),D="poly"==t?Math.Poly.generateKeys(d[0][1],f?f[f.length-1]:a.propIdKey):f?f.concat():Math.Poly.generateKeys(d,f?f[f.length-1]:a.propIdKey),m[r]!=D.length&&(m[l.buffKey]=D.length),h.propsPerNode=D.length>h.propsPerNode?D.length:h.propsPerNode,h.ids["_bi"+l.buffKey]=new (function(b){return function(c){e[0][0]=
e[0][0]||{};e[0][0][g]={binding:"_bi"+b.buffKey,position:h.data.length,relative:y,conversion:t,precision:v};h.data.push(a.buffIdKey=b.buffKey);a.buffIdKey++;for(var d={};0<b.props.length;)d.propKey=c[0]||a.propIdKey,this[d.propKey]=new (function(a){return function(b){if("poly"!=t&&e[0][0][b[0][0]]&&"undefined"!=typeof e[0][0][b[0][0]].value){this.property=b[0][0];var c="value"}else c=b[0][0];this.binding=c;b[0][1]=b[0][1]||0;this.value=b[0][1];"poly"!=t&&e[0][0][b[0][0]]&&"undefined"!=typeof e[0][0][b[0][0]].value?
e[0][0][b[0][0]].value="value"==b[0][0]?b[0][1]:b[0][1]/v:e[0][0][b[0][0]]="value"==b[0][0]?b[0][1]:b[0][1]/v;e[0][0][g][b[0][0]]={binding:a.propKey,data0PosI:h.data.length+1};h.data.push(a.propKey);h.data.push(1);for(c=0;c<q;c++)b[0][2]?y?h.data.push((b[0][2]-b[0][1])/q):h.data.push(b[0][1]+(b[0][2]-b[0][1])/q*c):y?h.data.push(0):h.data.push(b[0][1])}}(d))(b.props),c.shift(),b.props.shift(),a.propIdKey=d.propKey,a.propIdKey++,d={propKey:d.propKey};this.node=e[0][0];B.push(this.node)}}(l))(D),e.shift(),
l={buffKey:l.buffKey,props:l.props};return B};a.queue=function(){var a="poly"==arguments[2][0][0]?arguments[2][0][1].length:arguments[3]?arguments[3].length:arguments[2]?arguments[2].length:0;this.list=this.list||[];this.list[a]=this.list[a]||[];this.list[a].push(arguments)};a.start=function(b){console.log("Binding objects to stream - Running queue");for(var c=this.list;0<c.length;){if(c[c.length-1])for(var e=c[c.length-1],g=0;g<e.length;g++)a.init.apply(this,e[g]);c.pop()}b&&b()};return a};b.addon.binding();
b.addon.buffer=function(){var a=b.addon.buffer={evals:0};a.update=function(){this.updateCallbacks()};a.updateCalls=[];a.upclen=0;a.updateCallbacks=function(){for(var a=0;a<this.upclen;a++)this.updateCalls[a][1](this.updateCalls[a][0])};a.presets=function(a){for(var b in a)l.presets[b]=a[b]};var e,d,f,l={presets:{}},O=function(a,b,c){for(var e=this.CSPL||{},d=l.presets[a].CPs,f=l.presets[a].duration,g=l.presets[a].precision,h=d.length,r=[],m=0;m<h;m++)r[m]={t:d[m].t/f*b,p:d[m].p/g*c||d[m].p};b=[];
d=[];f=[];for(g=0;g<h;g++)m=r[g],b[g]=m.t,d[g]=m.p,f[g]=1;e.getNaturalKs(b,d,f);g=r[0].t;h=r[h-1].t;for(r=new Int32Array(new ArrayBuffer(4*h));g<=h;g++)r[g]=e.evalSpline(g,b,d,f);return[r,c||l.presets[a].precision]};a.eval=function(b,g,h,m,t,v,l,B,F,E){c.access.defaults.relative=c.access.defaults.relative||!1;h=h||c.access.defaults.relative;for(var r=[],q=0,n=g.length;q<n;q++){var y=g[q];var k=y[0];var A=y[2];for(var x=y[3],w=[],K=0,H=k.length;K<H;K++){for(var z=k[K],u=y[1],p=0,Q=u.length;p<Q;p++){e=
0;if(x)if(1==x)e-=f;else if(1<x||1>x)e+=x;d=0;var C=u[p];w[p]=u[p][0];for(var M=0,W=C.length;M<W;M++){var L=C[M];w[p]=L[0];for(var U=0,n=0,R=A.length;n<R;n++)A[n][1]<<=0,U+=A[n][1];R=0;for(n=A.length;R<n;R++){var V=A[R];f=V[1];L[2]=f/U*L[1];L[2]=Math.Type.convertToPrecisionType(z[b].conversion,L[2]);D(b,z,L,O(V[0],f,m||f),h,E);e+=f;d+=L[2]}}}v&&a.assignLeap(b,[z],w,!1,e,v,l,B,F);t&&(r[K]=a.getData(b,[z],w,t))}}a.evals+=k.length*A.length;a.update();return r};a.exec=function(b,g,h,m,t,l,y,B,F,E){c.access.defaults.relative=
c.access.defaults.relative||!1;h=h||c.access.defaults.relative;for(var r=[],q=0,n=g.length;q<n;q++){for(var v=g[q],k=v[0],v=v[1],A=[],x=0,w=k.length;x<w;x++){for(var p=k[x],H=d=e=0,z=v.length;H<z;H++){var u=v[H],I=u[0],Q=[A[H]=u[1],u[2]],C=[u[3],u[4]];d+=Math.Type.convertToPrecisionType(p[b].conversion,u[5])||0;e=0;if(I)if(1==I)e-=f;else if(1<I||1>I)e+=I;f=C[1];Q[2]=Math.Type.convertToPrecisionType(p[b].conversion,Q[1]);D(b,p,Q,O(C[0],f,m||f),h,E,!0);e+=f}l&&a.assignLeap(b,[p],[A],!1,e,l,y,B,F);t&&
(r[x]=a.getData(b,[p],[A],t))}a.evals+=v.length}a.update();return r};a.execLerp=function(b,e,d,g,f,m,l,B,F,E,J,G,p,P,k,A,x,w,K,H){m="prebuff"==c[b].state?c[b]:c.access;B=m.propDataLength+1;g=g[b][f].data0PosI;J-=E;G=O(G||"linear",J,J);p=p||1;if(e&&d)for(f=0,F=e.length;f<F;f++)for(var h=e[f][b],r=0,q=d.length;r<q;r++)for(var n=h[d[r]].data0PosI,t=m.data[n+E+1],v=0;v<J;v++){var y=E+v,y=y<B?y:m.reversion(y),N=n+y;H&&m.data[N+1]==m.arguments.leap||(y=Math.lerpSubject(t,m.data[g+y+1],l*(1-(G[1]-G[0][v])/
G[1])),t-=y,m.data[N+1]=t*p)}A&&a.assignLeap(b,[e[0]],d,P,k,A,x,w,K);a.evals+=e.length*d.length;a.update()};a.assignLeap=function(a,b,e,d,g,f,m,l,F){for(var h="prebuff"==c[a].state?c[a]:c.access,r=h.propDataLength+1,q=0,t=b.length;q<t;q++)for(var n=b[q][a],k=0,v=e.length;k<v;k++){var y=n[e[k]],B=y.data0PosI,p=h.data[B];if(y.leap&&m){var H=y.leap.dataPosI;h.data[H]=0}y.leap={callback:f,dataPos:d?g:p+g,dispose:"undefined"==typeof l?!0:l,zeroIn:F};p=y.leap.dataPos;p=p<r?p:h.reversion(p);B+=p;h.data[B]=
h.arguments.leap;y.leap.dataPosI=B}};var D=function(b,g,f,m,t,l,y){var h=g[f[0]].value?"value"==f[0]?g[f[0]].value:g[f[0]].value*g[b].precision:"value"==f[0]?g[f[0]]:g[f[0]]*g[b].precision,h=y?d:h+d;g=g[b][f[0]].data0PosI;b="prebuff"==c[b].state?c[b]:c.access;y=b.data[g];y+=e;var r=b.propDataLength+1;f=f[2];var q=m[0];m=m[1];for(var n=q.length,v=0;v<n;v++){var p=y+v,p=p<r?p:b.reversion(p),p=g+p;l&&b.data[p]==b.arguments.leap||(b.data[p]=t?b.data[p]+((q[v]-(q[v+1]||0))/(m/f)<<0):h+(m-q[v])/m*f<<0)}a.update()};
a.zeroOut=function(a,b,e,g,d,f){var h="prebuff"==c[a].state?c[a]:c.access,m=h.propDataLength+1;e-=b;if(g&&d)for(var r=0,q=g.length;r<q;r++)for(var l=g[r][a],t=0,v=d.length;t<v;t++)for(var p=l[d[t]].data0PosI,k=0;k<e;k++){var n=b+k,n=n<m?n:h.reversion(n),n=p+n;f&&h.data[n+1]==h.arguments.leap||(h.data[n+1]=0)}else for(r in h.bindings.ids)for(q in g=h.bindings.ids[r].node[a],g)if(g[q].data0PosI)for(d=g[q].data0PosI,l=0;l<e;l++)t=b+l,t=t<m?t:h.reversion(t),t=d+t,f&&h.data[t+1]==h.arguments.leap||(h.data[t+
1]=0)};a.valIn=function(b,e,g,d,f,m,l,p,F,E,J,G,Q,P){var h="prebuff"==c[b].state?c[b]:c.access,r=h.propDataLength+1;if(e&&g)for(var q=0,t=e.length;q<t;q++){var v=e[q][b];l=l||v.precision;for(var n=0,y=g.length;n<y;n++)for(var u=v[g[n]].data0PosI,B=m-f,D=0;D<B;D++){var C=f+D,C=C<r?C:h.reversion(C),C=u+C;P&&h.data[C+1]==h.arguments.leap||(h.data[C+1]=Math.Type.convertToPrecisionType(v.conversion,d,l))}}E&&a.assignLeap(b,[e[0]],g,p,F,E,J,G,Q)};a.getforwardData=function(a,b,e,g,d){for(var f="prebuff"==
c[a].state?c[a]:c.access,h=f.propDataLength+1,m=[],r=0,q=b.length;r<q;r++){var l=b[r][a];m[r]={};for(var t=0,p=e.length;t<p;t++)for(var n=e[t],k=l[n].data0PosI,A=f.data[k]+2,x=m[r][n]=0;x<g;x++){var w=A+x,w=w<h?w:f.reversion(w),w=k+w;d&&f.data[w+1]==f.arguments.leap||(m[r][n]+=f.data[w+1]/l.precision)}}return m};a.injectData=function(a,b,e,g,d,f,m,l,p){for(var h="prebuff"==c[a].state?c[a]:c.access,r=h.propDataLength,q=0,t=b.length;q<t;q++){var n=b[q][a];m*=n.precision;l*=n.precision;for(var k=0,v=
e.length;k<v;k++){var y=n["poly"==n.conversion?0:e[k]].data0PosI;var w=h.data[y];for(var B=0;B<d;B++){var F=w+B,F=F<r?F:h.reversion(F);if("poly"==n.conversion)for(var z=0,v=g.length;z<v;z++){y=n[z].data0PosI;var u=y+F;p&&h.data[u]==h.arguments.leap||(h.data[u]=f?g[z]*n.precision+h.data[u]:g[z]*n.precision,h.data[u]=h.data[u]<m?m:h.data[u]>l?l:h.data[u])}else u=y+F,p&&h.data[u]==h.arguments.leap||(h.data[u]=f?g*n.precision+h.data[u]:g*n.precision,h.data[u]=h.data[u]<m?m:h.data[u]>l?l:h.data[u])}}}};
a.queue=function(){this.list=this.list||[];this.list.push(arguments);return this.list.length-1};a.start=function(b){console.log("Buffering binded objects in stream - Running queue");for(var c=this.list;0<c.length;){var e=Array.prototype.shift.apply(c[0]);a[e].apply(this,c[0]);c.shift()}b&&b()};a.loadData=function(b,c,e,g,d,f){console.log("Loading in data and buffing objects in stream - "+c);var h=new window.XMLHttpRequest;h.open("GET",c,!0);h.responseType="text";h.callback=g;h.onload=function(){var c=
this.response,c=c.split(","),g=Array.prototype.shift.apply(c),h=Array.prototype.shift.apply(c);a.buffinData(b,c,e,d||g<<0,f||h<<0);this.callback&&this.callback()};h.send()};a.buffinData=function(a,b,e,g,d){for(var f,h,m=c[a].state,r="prebuff"==m?c[a]:c.access,l=1+d,q=0,t=0,p=0;q<b.length;q++){0==(q-0)%g&&(h=b[q],q++,t=1,p++);0==(q-p)%l&&(f=b[q],q++,t++,p++);for(var n="prebuff"==m?r.ids["_bi"+h]:r.bindings.ids["_bi"+h],n=n.node[a][n[f].binding].data0PosI,k=0;k<d;k++)r.data[n+e+k]=b[q],q++}};a.getData=
function(b,e,g,d,f,m,l){m="prebuff"==c[b].state?c[b]:c.access;f=f?f<d||f>m.propDataLength?m.propDataLength:f:m.propDataLength;d=d?f&&d>f||d>m.propDataLength?0:d:0;return a.buffoutData(b,e,g,d,f)};a.saveData=function(a,b){var c=document.createElement("a");document.body.appendChild(c);c.style="display: none";return function(a,b){var e=new window.Blob([[a]],{type:"octet/stream"}),e=window.URL.createObjectURL(e);c.href=e;c.download=b;c.click();window.URL.revokeObjectURL(e)}}();a.buffoutData=function(a,
b,e,g,d){var f="prebuff"==c[a].state?c[a]:c.access;d-=g;var h=1+d,m=e?h*e.length+e.length+1:0,r=[m,d];if(b)for(var l=0,q=b.length;l<q;l++){var p=b[l][a];if(!e){e=[];for(var t in p)"undefined"!=typeof b[l][t]&&e.push(t)}0==m&&(m=h*e.length+e.length+1,r=[m,d]);r.push(p.binding.replace("_bi","")<<0);for(var n=0,k=e.length;n<k;n++){var A=p[e[n]];r.push(A.binding);A=A.data0PosI;r.push(f.data[A+g]);for(var x=0;x<d;x++){var w=g+x,w=w<f.propDataLength?w:f.reversion(w);r.push(f.data[A+w+1])}}}return r};return a};
var e=b.addon.buffer();b.addon.buffer.ease=function(){var a=b.addon.buffer.ease={};a.precisions=100;a.update=function(){c=this.precisions;var a=d.precisions,b;for(b in d){for(var g in d[b].CPs)d[b].CPs[g].p=d[b].CPs[g].p/a*c;d[b].duration=d.durations;d[b].precision=c}d.precisions=c;e.presets(d);this.updateCallbacks()};a.updateCalls=[];a.upclen=0;a.updateCallbacks=function(){for(var a=0;a<this.upclen;a++)this.updateCalls[a][1](this.updateCalls[a][0])};var c=a.precisions;var d={durations:100,precisions:100,
linear:{CPs:[{t:0,p:100},{t:50,p:50},{t:100,p:0}]},easeInSine:{CPs:[{t:0,p:100},{t:17,p:96},{t:100,p:0}]},easeOutSine:{CPs:[{t:0,p:100},{t:83,p:3},{t:100,p:0}]},easeInOutSine:{CPs:[{t:0,p:100},{t:19,p:92},{t:81,p:8},{t:100,p:0}]},easeInQuad:{CPs:[{t:0,p:100},{t:32,p:89},{t:75,p:44},{t:100,p:0}]},easeOutQuad:{CPs:[{t:0,p:100},{t:17,p:69},{t:74,p:6},{t:100,p:0}]},easeInOutQuad:{CPs:[{t:0,p:100},{t:17,p:93},{t:35,p:75},{t:55,p:40},{t:80,p:7},{t:100,p:0}]},easeInCubic:{CPs:[{t:0,p:100},{t:17,p:99},{t:42,
p:92},{t:66,p:71},{t:86,p:35},{t:100,p:0}]},easeOutCubic:{CPs:[{t:0,p:100},{t:15,p:59},{t:33,p:30},{t:57,p:8},{t:83,p:0},{t:100,p:0}]},easeInOutCubic:{CPs:[{t:0,p:100},{t:22,p:96},{t:38,p:77},{t:50,p:50},{t:64,p:18},{t:82,p:2},{t:100,p:0}]},easeInQuart:{CPs:[{t:0,p:100},{t:21,p:100},{t:42,p:96},{t:63,p:84},{t:82,p:54},{t:92,p:28},{t:100,p:0}]},easeOutQuart:{CPs:[{t:0,p:100},{t:12,p:58},{t:27,p:28},{t:45,p:9},{t:66,p:1},{t:81,p:0},{t:100,p:0}]},easeInOutQuart:{CPs:[{t:0,p:100},{t:15,p:100},{t:28,p:94},
{t:41,p:76},{t:50,p:49},{t:57,p:26},{t:68,p:8},{t:84,p:0},{t:100,p:0}]},easeInQuint:{CPs:[{t:0,p:100},{t:24,p:100},{t:43,p:98},{t:64,p:89},{t:81,p:64},{t:93,p:28},{t:100,p:0}]},easeOutQuint:{CPs:[{t:0,p:100},{t:9,p:61},{t:23,p:26},{t:37,p:10},{t:59,p:1},{t:78,p:0},{t:100,p:0}]},easeInOutQuint:{CPs:[{t:0,p:100},{t:16,p:99},{t:28,p:96},{t:45,p:70},{t:52,p:39},{t:60,p:17},{t:75,p:1},{t:88,p:0},{t:100,p:0}]},easeInExpo:{CPs:[{t:0,p:100},{t:9,p:99},{t:56,p:94},{t:72,p:85},{t:83,p:69},{t:92,p:42},{t:100,
p:0}]},easeOutExpo:{CPs:[{t:0,p:100},{t:5,p:70},{t:22,p:21},{t:48,p:3},{t:64,p:1},{t:93,p:0},{t:100,p:0}]},easeInOutExpo:{CPs:[{t:0,p:100},{t:11,p:99},{t:21,p:99},{t:30,p:96},{t:38,p:90},{t:47,p:67},{t:53,p:33},{t:60,p:12},{t:72,p:2},{t:79,p:0},{t:85,p:0},{t:100,p:0}]},easeInCirc:{CPs:[{t:0,p:100},{t:33,p:94},{t:54,p:83},{t:81,p:58},{t:94,p:35},{t:99,p:10},{t:100,p:0}]},easeOutCirc:{CPs:[{t:0,p:100},{t:1,p:90},{t:6,p:66},{t:14,p:48},{t:26,p:32},{t:41,p:19},{t:60,p:8},{t:79,p:2},{t:100,p:0}]},easeInOutCirc:{CPs:[{t:0,
p:100},{t:17,p:97},{t:27,p:92},{t:37,p:83},{t:44,p:74},{t:47,p:67},{t:49,p:60},{t:50,p:50},{t:51,p:41},{t:53,p:31},{t:57,p:22},{t:62,p:17},{t:71,p:9},{t:82,p:3},{t:100,p:0}]},easeInBack:{CPs:[{t:0,p:100},{t:4,p:100},{t:64,p:100},{t:86,p:53},{t:100,p:0}]},easeOutBack:{CPs:[{t:0,p:100},{t:3,p:86},{t:35,p:1},{t:95,p:0},{t:100,p:0}]},easeInOutBack:{CPs:[{t:0,p:100},{t:3,p:100},{t:46,p:69},{t:51,p:44},{t:56,p:22},{t:97,p:0},{t:100,p:0}]},easeInElastic:{CPs:[{t:0,p:100},{t:8,p:99},{t:15,p:99},{t:22,p:100},
{t:32,p:100},{t:41,p:98},{t:47,p:99},{t:63,p:99},{t:74,p:90},{t:93,p:93},{t:95,p:60},{t:100,p:0}]},easeOutElastic:{CPs:[{t:0,p:100},{t:3,p:65},{t:7,p:2},{t:26,p:11},{t:38,p:0},{t:56,p:1},{t:69,p:0},{t:75,p:0},{t:83,p:0},{t:90,p:0},{t:100,p:0}]},easeInOutElastic:{CPs:[{t:0,p:100},{t:13,p:100},{t:23,p:99},{t:33,p:99},{t:45,p:95},{t:48,p:67},{t:51,p:41},{t:55,p:4},{t:67,p:0},{t:78,p:0},{t:87,p:0},{t:100,p:0}]},easeInBounce:{CPs:[{t:0,p:100},{t:4,p:98},{t:8,p:100},{t:12,p:96},{t:23,p:97},{t:26,p:100},
{t:28,p:96},{t:60,p:95},{t:63,p:100},{t:68,p:80},{t:87,p:13},{t:100,p:0}]},easeOutBounce:{CPs:[{t:0,p:100},{t:15,p:83},{t:28,p:40},{t:33,p:17},{t:36,p:2},{t:38,p:4},{t:71,p:4},{t:73,p:0},{t:77,p:4},{t:88,p:3},{t:91,p:0},{t:94,p:1},{t:100,p:0}]},easeInOutBounce:{CPs:[{t:0,p:100},{t:3,p:98},{t:5,p:99},{t:9,p:97},{t:13,p:99},{t:16,p:94},{t:28,p:94},{t:31,p:98},{t:37,p:77},{t:44,p:55},{t:55,p:46},{t:64,p:19},{t:68,p:1},{t:72,p:6},{t:82,p:7},{t:86,p:0},{t:91,p:3},{t:95,p:0},{t:97,p:1},{t:100,p:0}]}};a.update()};
b.addon.buffer.ease();b.addon.timeframe=function(){var a=b.addon.timeframe={};a.process=void 0;a.invoke=void 0;a.length=void 0;a.init=!1;a.ready=!1;a.running=!1;a.control=!1;a.lapse=10;a.duration=a._duration=0;a.read=0;a.thrust=0;a.mode="2d";a.runtime=function(){this.runtimeCallbacks()};a.runtimeAuthority=function(a,b,d){c[b].script[d]=a};a.clearRuntimeAuthority=function(a,b){isNaN(b)?c[a].script=[]:c[a].script[b]&&c[a].script.splice(b,1)};a.clearRuntimeAuthoritiesNear=function(a,b,c){this.timeline.removeInsertsNear(a,
b,c);var d=b+c;for(b-=c;b<d;b++)this.clearRuntimeAuthority(a,b)};a.revert=function(a){this.revertCallbacks(a)};a.revertCalls=[];a.rrclen=0;a.revertCallbacks=function(a){for(var b=0;b<this.rrclen;b++)this.revertCalls[b][1](this.revertCalls[b][0],a)};var e=function(b){a.revert(b)};a.update=function(b){d.process=this.process;d.invoke=this.invoke;d.length=this.length;d.running=this.running;d.lapse=this.lapse;this.updateCallbacks&&this.updateCallbacks();"3d"==a.mode?(l(),D()):(O(),n());b=b?b-1:void 0;
c.access.option=d.access;c.access.method="all";c.access.rCount=c.access.tCount=1;b&&a.syncing(b);c.access.output_revertCall=e};a._init=function(a){this.mode="CanvasRenderingContext2D"==a.canvases["0"].context.constructor.name?"2d":"3d";this.length=c[c.access.stream].length;this.init=!0};a._forceInit=function(a){this.mode="CanvasRenderingContext2D"==a.canvases["0"].context.constructor.name?"2d":"3d";this.length=c.access.access.prototype.length;this.init=!0};a._ready=function(){this.ready=!0};a.run=
function(){!this.running&&this.ready&&(d.now=d._then=Date.now(),this.length=c[c.access.stream]?c[c.access.stream].length:this.length,this.running=!0,this.update(),f())};a.stop=function(a){this.running&&(this.running=!1,this.update(),window.cancelAnimationFrame(d.animationFrameLoop));a&&(this.duration=a,this.syncing())};a.tick=function(a,b){d.byFrame.exact=a||d.byFrame.exact;d.byFrame.number=b||1;this.running=!1;this.run()};a.keyPauseToggle=function(a){a&&(console.log("KeyCode:"+a.keyCode),32==a.keyCode&&
(this.running?this.stop():this.run()))};a.syncing=function(a){c.access.syncOffsets(a||this.duration)};var d={_then:Date.now(),access:"read",_remain:0,lapse:a.lapse,byFrame:{number:0,exact:!1},frame:a},f=function(){d.running&&(window.stats.begin(),d.now=Date.now(),d._delta=d.now-d._then+d._remain,a[d.access]=d._timeFrame=d._delta/10<<0,a._duration=a.duration+d._timeFrame,d.process(),d._remain=d._delta-10*d._timeFrame,d._then=d.now,0<d._timeFrame&&d._timeFrame<d.lapse&&(a.runtime(),d.byFrame.exact?
d.byFrame.exact&&(c.access.process(1),d.byFrame.exact=!1,d.byFrame.number=0,a.stop()):(c.access.process(d._timeFrame),0<d.byFrame.number&&(1==d.byFrame.number&&a.stop(),d.byFrame.number--),a.duration+=d._timeFrame),d.invoke()),d.animationFrameLoop=window.requestAnimationFrame(f),window.stats.end())};a.switchToTimeFrameThrusting=function(a){d.access="thrust";c.access.defaults.relative=!0;c.access.block=!0;this.update(a)};var l=function(){c.access.output_utilizeThrustData=function(a,b,c){if(0!=a||806==
c){b=this.bindings.ids["_bi"+b];var d=b[c];d.value+=a;d.property?b.node[d.property][d.binding]=d.value/b.node[this.stream].precision:b.node[d.binding]=d.value/b.node[this.stream].precision;806==c&&(b.node.blockCallback=!1)}}},O=function(){c.access.output_utilizeThrustData=function(a,b,c){0!=a&&(b=this.bindings.ids["_bi"+b],c=b[c],c.value+=a,c.property?b.node[c.property][c.binding]=c.value/b.node[this.stream].precision:b.node[c.binding]=c.value/b.node[this.stream].precision)}};a.switchToTimeFrameReading=
function(a){d.access="read";c.access.defaults.relative=!0;c.access.block=!0;this.update(a)};var D=function(){c.access.output_utilizeReadData=function(a,b,c){b=this.bindings.ids["_bi"+b];var d=b[c];d.value=a;d.property?b.node[d.property][d.binding]=d.value/b.node[this.stream].precision:b.node[d.binding]=d.value/b.node[this.stream].precision;806==c&&(b.node.blockCallback=!1)}},n=function(){c.access.output_utilizeReadData=function(a,b,c){b=this.bindings.ids["_bi"+b];c=b[c];c.value=a;c.property?b.node[c.property][c.binding]=
c.value/b.node[this.stream].precision:b.node[c.binding]=c.value/b.node[this.stream].precision}};a.resetStreamProperties=function(){c.access.revertFromTo(this.length,0)};return a};for(var d=b.addon.timeframe(),f=["comment","segment","action","sound"],l={ci:0};l.ci<f.length;l={ci:l.ci},l.ci++)b.addon.timeframe[f[l.ci]]=function(a){return function(){var b=c[f[a.ci]]={script:[]};b.accessRuntime=void 0;b.runtime=function(a,c,e){if(!d.control){for(c+=e;a<c;a++)b.script[a]&&b.script[a].main();return b.checkNext(c)}};
b.accessRevert=void 0;b.revert=function(a,c){if(!d.control)return b.checkNext(a)};b.checkNext=function(a){for(var d=c.access.propDataLength,e=a;e<b.script.length;e++)b.script[e]&&(e<d||d<a)&&(d=e);return d}}}(l),b.addon.timeframe[f[l.ci]]()});function CSPL(){}CSPL._gaussJ={};
CSPL._gaussJ.solve=function(a,b){for(var c=a.length,e=0;e<c;e++){for(var d=0,f=Number.NEGATIVE_INFINITY,l=e;l<c;l++)a[l][e]>f&&(d=l,f=a[l][e]);CSPL._gaussJ.swapRows(a,e,d);0===a[d][e]&&console.log("matrix is singular!");for(d=e+1;d<c;d++){for(f=e+1;f<c+1;f++)a[d][f]-=a[d][e]/a[e][e]*a[e][f];a[d][e]=0}}for(e=c-1;0<=e;e--)for(d=a[e][c]/a[e][e],b[e]=d,f=e-1;0<=f;f--)a[f][c]-=a[f][e]*d,a[f][e]=0};CSPL._gaussJ.zerosMat=function(a,b){for(var c=[],e=0;e<a;e++){c.push([]);for(var d=0;d<b;d++)c[e].push(0)}return c};
CSPL._gaussJ.printMat=function(a){for(var b=0;b<a.length;b++)console.log(a[b])};CSPL._gaussJ.swapRows=function(a,b,c){var e=a[b];a[b]=a[c];a[c]=e};
CSPL.getNaturalKs=function(a,b,c){for(var e=a.length-1,d=CSPL._gaussJ.zerosMat(e+1,e+2),f=1;f<e;f++)d[f][f-1]=1/(a[f]-a[f-1]),d[f][f]=2*(1/(a[f]-a[f-1])+1/(a[f+1]-a[f])),d[f][f+1]=1/(a[f+1]-a[f]),d[f][e+1]=3*((b[f]-b[f-1])/((a[f]-a[f-1])*(a[f]-a[f-1]))+(b[f+1]-b[f])/((a[f+1]-a[f])*(a[f+1]-a[f])));d[0][0]=2/(a[1]-a[0]);d[0][1]=1/(a[1]-a[0]);d[0][e+1]=3*(b[1]-b[0])/((a[1]-a[0])*(a[1]-a[0]));d[e][e-1]=1/(a[e]-a[e-1]);d[e][e]=2/(a[e]-a[e-1]);d[e][e+1]=3*(b[e]-b[e-1])/((a[e]-a[e-1])*(a[e]-a[e-1]));CSPL._gaussJ.solve(d,
c)};CSPL.evalSpline=function(a,b,c,e){for(var d=1;b[d]<a;)d++;a=(a-b[d-1])/(b[d]-b[d-1]);return(1-a)*c[d-1]+a*c[d]+a*(1-a)*((e[d-1]*(b[d]-b[d-1])-(c[d]-c[d-1]))*(1-a)+(-e[d]*(b[d]-b[d-1])+(c[d]-c[d-1]))*a)};
var Utils={userSelectDropDown:function(a){var b=a;b.addEventListener("change",function(){window.localStorage.setItem("storedSelect",[this.selectedIndex,this.options[this.selectedIndex].value]);window.location.reload()});var c=window.localStorage.getItem("storedSelect");c?(c=c.split(","),b.selectedIndex=c[0],b=c[1]):b=void 0;return b||a.options[a.selectedIndex].value},vscodeSelectDropDown:function(a,b){for(var c,e=0;e<b.length;e++)if(b[e].value===a){b[e].selected=!0;c=b.options[e].value;break}return c},
Blend:{}};Utils.Blend.src="ZeroFactor OneFactor SrcAlphaFactor OneMinusSrcAlphaFactor DstAlphaFactor OneMinusDstAlphaFactor DstColorFactor OneMinusDstColorFactor SrcAlphaSaturateFactor".split(" ");Utils.Blend.dst="ZeroFactor OneFactor SrcColorFactor OneMinusSrcColorFactor SrcAlphaFactor OneMinusSrcAlphaFactor DstAlphaFactor OneMinusDstAlphaFactor".split(" ");Utils.Blend.blending="CustomBlending";Utils.flagBut=!1;
Utils.bindButtonUseFunction=function(a,b,c){if("undefined"!=typeof a){var e=function(a){a.preventDefault();Utils.flagBut||(Utils.flagBut=!0,setTimeout(function(){Utils.flagBut=!1},100),0<arguments.length?b.apply(this,c):b());return!1};a.addEventListener("click",e);a.addEventListener("touchstart",e)}};Utils.unBindButton=function(a){"undefined"!=typeof a&&(a.removeEventListener("click"),a.removeEventListener("touchstart"))};
Utils.bindButtonAndKeyPressUseFunction=function(a,b,c,e){if("undefined"!=typeof a){var d=function(a){a.preventDefault();Utils.flagBut||(Utils.flagBut=!0,setTimeout(function(){Utils.flagBut=!1},100),0<arguments.length?c.apply(this,e):c());return!1};a.addEventListener("click",d);a.addEventListener("touchstart",d);Utils.keyBindings[Utils.keyMapping[b]]={keyPress:function(a){0<Utils.keyBindings[a.keyCode].args.length?Utils.keyBindings[a.keyCode].func.apply(this,Utils.keyBindings[a.keyCode].args):Utils.keyBindings[a.keyCode].func();
return!1},func:c,key:b,args:e};window.addEventListener("keypress",Utils.keyBindings[Utils.keyMapping[b]].keyPress)}};Utils.unBindButtonAndKeyPress=function(a,b){"undefined"!=typeof a&&(a.removeEventListener("click"),a.removeEventListener("touchstart"),window.removeEventListener("keypress",Utils.keyBindings[Utils.keyMapping[b]].keyPress))};
Utils.bindKeyPressUseFunction=function(a,b,c){Utils.keyBindings[Utils.keyMapping[a]]={keyPress:function(a){0<Utils.keyBindings[a.keyCode].args.length?Utils.keyBindings[a.keyCode].func.apply(this,Utils.keyBindings[a.keyCode].args):Utils.keyBindings[a.keyCode].func();return!1},func:b,key:a,args:c};window.addEventListener("keypress",Utils.keyBindings[Utils.keyMapping[a]].keyPress)};Utils.unBindKeyPress=function(a){window.removeEventListener("keypress",Utils.keyBindings[Utils.keyMapping[a]].keyPress)};
Utils.bindKeyUpDownUseFunction=function(a,b,c,e,d){var f=!1;Utils.keyBindings[Utils.keyMapping[a]]={keyDown:function(a){if(d&&b){if(f)return!1;f=!0;keyState[a]=void 0}0<e.length?b.apply(this,e):b();return!1},keyUp:function(a){if(d&&c){if(f)f=!1;else return!1;keyState[a]=void 0}0<e.length?c.apply(this,e):c();return!1}}};var keyState=[];Utils.bindKeyStateLoop=function(){for(var a=0;a<keyState.length;a++)if(keyState[a])keyState[a][0][keyState[a][1]](a)};
window.addEventListener("keydown",function(a){keyState[a.keyCode||a.which]=Utils.keyBindings[a.keyCode||a.which]?[Utils.keyBindings[a.keyCode||a.which],"keyDown"]:void 0},!0);window.addEventListener("keyup",function(a){keyState[a.keyCode||a.which]=Utils.keyBindings[a.keyCode||a.which]?[Utils.keyBindings[a.keyCode||a.which],"keyUp"]:void 0},!0);Utils.unBindKeyUpDown=function(a){Utils.keyBindings[Utils.keyMapping[a]]=void 0};Utils.keyBindings={};
Utils.keyMapping={1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,0:48,"-":189,"=":187,"\\":220,q:81,w:87,e:69,r:82,t:84,y:89,u:85,i:73,o:79,p:80,"[":219,"]":221,a:65,s:83,d:68,f:70,g:71,h:72,j:74,k:75,l:76,";":186,"'":222,z:90,x:88,c:67,v:86,b:66,n:78,m:77,",":188,".":190,"/":191};Array.prototype.fill=Array.prototype.fill?Array.prototype.fill:function(a){return Array.apply(null,Array(this.length)).map(Number.prototype.valueOf,a)};Math.radians=function(a){return a*Math.PI/180};
Math.degrees=function(a){return 180*a/Math.PI};Math.lerp=function(a,b){return a*b};Math.lerpSubject=function(a,b,c){return this.lerp(a-b,c)};Math.lerpProp=function(a,b,c,e){a[b]+=this.lerpSubject(c,a[b],e)};Math.lerpProps=function(a,b,c,e){for(var d=0;d<a.length;d++)a[d][b]+=this.lerpSubject(c,a[d][b],e)};Math.distance2=function(a,b){var c=a.x-b.x,e=a.y-b.y;return Math.sqrt(c*c+e*e)};Math.randomFromTo=function(a,b){return Math.floor(Math.random()*(b-a)+a)};
Math.aspectRatio=function(a,b){return a/b};Math.rotateFromPoint=function(a,b,c,e,d,f){f&&(d-=180);d=d*Math.PI/180;return{x:Math.cos(d)*(a-c)-Math.sin(d)*(b-e)+c,y:Math.sin(d)*(a-c)+Math.cos(d)*(b-e)+e}};Math.Type={};Math.Type.identify=function(a){if(a.constructor){if("Vector3"==a.constructor.name)return"translation";if("Euler"==a.constructor.name)return"radian"}return"position"==a.type?"translation":"rotation"==a.type?"radian":"poly"==a.type?"poly":"uniform"};
Math.Type.precision=function(a){if("translation"==a)return 1E3;if("radian"==a)return 1E4;if("uniform"==a)return 1E3};Math.Type.convertToPrecision=function(a,b){return b*this.precision(a)};Math.Type.convertFromPrecision=function(a,b){return b/this.precision(a)};Math.Type.convertToType=function(a,b){return"radian"==a?Math.radians(b):b};Math.Type.convertFromType=function(a,b){return"radian"==a?Math.degrees(b):b};
Math.Type.convertToPrecisionType=function(a,b,c){return Math.Type.convertToType(a,c?b*c:b*this.precision(a))};Math.Type.convertFromPrecisionType=function(a,b,c){return Math.Type.convertFromType(a,c?b/c:b/this.precision(a))};Math.Type.convertToPrecisionData=function(a,b,c,e,d){for(var f=0,l=b.length;f<l;f++)for(var g=c;g<c+e;g++)b[f][g]&&(b[f][g]=d?b[f][g]*d:this.convertToPrecision(a,b[f][g]));return b};
Math.Type.convertFromPrecisionData=function(a,b,c,e,d){for(var f=0,l=b.length;f<l;f++)for(var g=c;g<c+e;g++)b[f][g]&&(b[f][g]=d?b[f][g]/d:this.convertFromPrecision(a,b[f][g]));return b};Math.Type.convertToTypeData=function(a,b,c,e){for(var d=0,f=b.length;d<f;d++)for(var l=c;l<c+e;l++)b[d][l]&&(b[d][l]=this.convertToType(a,b[d][l]));return b};Math.Type.convertFromTypeData=function(a,b,c,e){for(var d=0,f=b.length;d<f;d++)for(var l=c;l<c+e;l++)b[d][l]&&(b[d][l]=this.convertFromType(a,b[d][l]));return b};
Math.Type.convertToPrecisionDataType=function(a,b,c,e,d){for(var f=0,l=b.length;f<l;f++)for(var g=c;g<c+e;g++)b[f][g]&&(b[f][g]=d?b[f][g]*d:this.convertToPrecision(a,b[f][g]),b[f][g]=this.convertToType(a,b[f][g]));return b};Math.Type.convertFromPrecisionDataType=function(a,b,c,e,d){for(var f=0,l=b.length;f<l;f++)for(var g=c;g<c+e;g++)b[f][g]&&(b[f][g]=d?b[f][g]/d:this.convertFromPrecision(a,b[f][g]),b[f][g]=this.convertFromType(a,b[f][g]));return b};Math.Cache={};
Math.Cache.store=function(a,b,c){Math.Cache[a]=b.apply(this,[c])};Math.Poly={};Math.Poly.generateKeys=function(a,b){for(var c=[],e=0,d=a.length;e<d;e++)c[e]=b?b+e:e;return c};Math.Poly.poly=function(a,b,c){if(!b.length)return c?b*c:Math.Type.convertToPrecision(a,b);for(var e=[],d=0,f=b.length;d<f;d++)e[d]=b[d]?Math.Poly.poly(a,b[d],c):0;return e};Math.Poly.generate=function(a,b,c){for(var e=[],d=0,f=b.length;d<f;d++)e[d]=[d,b[d]?Math.Poly.poly(a,b[d],c):0];return e};
Math.Poly.add=function(a,b,c){a=[];for(var e=0,d=b.length;e<d;e++)a[e]=b[e]+c[e];return a};Math.Poly.subtract=function(a,b,c){a=[];for(var e=0,d=b.length;e<d;e++)a[e]=b[e]-c[e];return a};Math.Poly.multiply=function(a,b,c){a=[];for(var e=0,d=b.length;e<d;e++)a[e]=b[e]*c[e];return a};Math.Poly.divide=function(a,b,c){a=[];for(var e=0,d=b.length;e<d;e++)a[e]=b[e]/c[e];return a};Math.Poly.addScalarVector=function(a,b){for(var c=[b.x,b.y,b.z],e,d=0,f=a.length;d<f;d++)e=d-3*(d/3<<0),a[d]+=c[e]?c[e]:1};
Math.Poly.subtractScalarVector=function(a,b){for(var c=[b.x,b.y,b.z],e,d=0,f=a.length;d<f;d++)e=d-3*(d/3<<0),a[d]-=c[e]?c[e]:1};Math.Poly.multiplyScalarVector=function(a,b){for(var c=[b.x,b.y,b.z],e,d=0,f=a.length;d<f;d++)e=d-3*(d/3<<0),a[d]*=c[e]?c[e]:1};Math.Poly.divideScalarVector=function(a,b){for(var c=[b.x,b.y,b.z],e,d=0,f=a.length;d<f;d++)e=d-3*(d/3<<0),a[d]/=c[e]?c[e]:1};
Math.Poly.smoothOut=function(a,b){for(var c=this.avg(a)*b,e=Array(a.length),d=0;d<a.length;d++)e[d]=this.avg([c,this.avg([0<d?e[d-1]:a[d],a[d],d<a.length?a[d]:a[d-1]])]);return e};Math.Poly.avg=function(a){return a.reduce(function(a,c){return a+c},0)/a.length};Math.Poly.Medium={};
Math.Poly.Medium.midDisperse=function(a,b,c){for(var e=[],d=0;d<b;d++){for(var f=d/b*a,l=[],g=0,p=a+1;g<p;g++){var m=g+f,m=m-(m/a<<0)*a,m=m>a/2?a-m:m,m=0<m?m-0:0,m=0==(m<g?0:1)?0:m;l[g]=m}f=[];g=[];p=0;for(m=l.length;0<m;m--)g[p]=l[m-1],f[m-1]=g[p]+l[p],f[m-1]=f[m-1]>a/2?1:f[m-1]/(a/2),p++;e[d]=c?Math.Poly.smoothOut(f,c):f}return e};
Math.Poly.Medium.midEase=function(a,b){for(var c=[],e=0,d=a+1;e<d;e++){var f=0-e+a,f=f-(f/a<<0)*a,f=f>a/2?a-f:f;c[e]=0<f?f-0:0}e=[];for(d=0;d<c.length;d++)e[d]=c[d]>a/2?1:c[d]/(a/2);return e=b?Math.Poly.smoothOut(e,b):e};window.app={width:window.innerWidth,height:window.innerHeight,resolution:"1280,720",fullscreen:!1,touch:!1,popup:!1,pointers:{enabled:!0,inUse:!1},marquee:{},motionblur:{shutterspeed:2,influence:10},uniforms:{godray_amount:15,screenshadow_alpha:1,ash_direction:3},sound:!0,ready:!1};
window.canvases=[];window.createCanvas={};window.container={};window.info={};window.stats={};
window.context=function(a,b){var c=this.THREE,e=this.Stats;this.container=document.getElementById(a);this.info=document.getElementById(b);this.stats=e?new e:{showPanel:function(){},begin:function(){},end:function(){}};this.stats.showPanel(0);e&&this.info.appendChild(this.stats.dom);this.createCanvas=function(a){var b={};"3d"!==a?(b.node=document.createElement("canvas"),b.context=b.node.getContext("2d")):(b.renderer=new c.WebGLRenderer,b.renderer.setSize(this.app.resolution.width,this.app.resolution.height),
b.renderer.setClearColor(0),b.renderer.context.scene=new c.Scene,b.renderer.context.camera=new c.PerspectiveCamera(100,this.app.width/this.app.height,1,1E5),b.context=b.renderer.context,b.node=b.renderer.domElement,b.node.tabindex="1");b.node.width=this.app.resolution.width;b.node.height=this.app.resolution.height;b.node.style.width=this.app.width+"px";b.node.style.height=this.app.height+"px";this.app.element=this.container;b.context.constructor.name=b.context.constructor.name||"2d"==a?"CanvasRenderingContext2D":
"WebGLRenderingContext";this.container.appendChild(b.node);window.canvases.push(b);return b};this.buildContext=function(a,b,c){var d=document.createElement("script");d.src=b;d.onload=function(){c()};document.body.appendChild(d);return a}};
window.onresize=function(){this.app.width=this.innerWidth;this.app.height=this.innerHeight;if(0<this.canvases.length)for(var a=0,b=this.canvases.length;a<b;a++)if("undefined"===typeof this.canvases[a].id){this.canvases[a].renderer&&(this.canvases[a].renderer.setSize(this.app.resolution.width,this.app.resolution.height),this.canvases[a].renderer.render(this.canvases[a].context.scene,this.canvases[a].context.camera),this.canvases[a].context.camera.updateProjectionMatrix());this.canvases[a].node.width=
this.app.resolution.width;this.canvases[a].node.height=this.app.resolution.height;this.canvases[a].node.style.width=this.app.width+"px";this.canvases[a].node.style.height=this.app.height+"px";if(!this.app.ready)return;this.canvases[a].app&&this.canvases[a].app.resolution(this.app);window.ctx.calc&&window.ctx.calc();window.ctx.rendering&&window.ctx.rendering()}this.resizeCallbacks()};
window.launchFullscreen=function(a){a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.msRequestFullscreen&&a.msRequestFullscreen()};window.exitFullscreen=function(a){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()};
window.toggleFullscreen=function(a,b){a?window.launchFullscreen(b):window.exitFullscreen();window.setTimeout(window.onresize(),1E3)};window.update=function(){this.updateCallbacks()};window.resizeCalls=[];window.resizeCallbacks=function(){for(var a=0;a<this.resizeCalls.length;a++)if(this.resizeCalls[a]._resize)this.resizeCalls[a]._resize();else this.resizeCalls[a]()};window.changeResolution=function(a){window.app.resolution=a;window.setTimeout(window.onresize(),1E3)};window.popupCount=0;
window.popup=function(){window.open("http://localhost:5000/","app"+window.popupCount,"width=1024,height=768,toolbar=0,location=0,directories=0,status=0,menubar=0,scrollbars=0,resizable=1").focus();window.popupCount++};
window.getChromeVersionPerfomanceGL=function(a){function b(a){var b={renderer:"",vendor:""},c=a.getExtension("WEBGL_debug_renderer_info");null!=c&&(b.renderer=a.getParameter(c.UNMASKED_RENDERER_WEBGL),b.vendor=a.getParameter(c.UNMASKED_VENDOR_WEBGL));return b}var c=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./),e=window.performance||window.mozPerformance||window.msPerformance||window.webkitPerformance||{};console.log("Performance--------");for(var d in e)console.log(d);if(a.context.getParameter)console.log("OpenGL--------");
else return console.log("2D Context--------"),c?parseInt(c[2],10):!1;a=a.context;console.log(a.getParameter(a.RENDERER));console.log(a.getParameter(a.VENDOR));console.log(b(a).vendor);console.log(b(a).renderer);return c?parseInt(c[2],10):!1};window.app.vscode=window.parent.Authority||window.top.Authority||{_fileLocal:""};